define(["backbone","color"],function(e,t){var n=e.View.extend({el:"#options",events:{"mousedown #outerCircle":"startColorDrag","mousemove #outerCircle":"colorDrag","mouseleave #outerCircle":"endColorDrag","mouseup #outerCircle":"endColorDrag","mousedown #invert":"toggleBackground","mousedown .basicSelectors":"toggleColor"},initialize:function(e){_.extend(this,e)},startColorDrag:function(e){e.preventDefault(),this.dragging=!0;var t=this.$("#outerCircle"),n=this.$("#colorZoom");t.addClass("dragging"),n.addClass("active");var r=this.getColor(e);App.Views.Toolbar.model.set("color",r)},getColor:function(e){var n=this.$("#outerCircle").width()/2,r=this.$("#outerCircle").height()/2,i=Math.atan2(e.offsetY-r,e.offsetX-n)*180/Math.PI+150;return t("hsv("+Math.abs(i>0?i:360+i)+", 100%, 100%)").css()},colorDrag:function(e){var t=this.$("#colorZoom");t.css({transform:"translate("+(e.offsetX-t.width()/2)+"px,"+(e.offsetY-t.height()/2)+"px)","-webkit-transform":"translate("+(e.offsetX-t.width()/2)+"px,"+(e.offsetY-t.height()/2)+"px)"});var n=this.getColor(e);t.children().css("background-color",n),this.dragging&&App.Views.Toolbar.model.set("color",n)},endColorDrag:function(e){this.dragging=!1;var t=this.$("#outerCircle"),n=this.$("#colorZoom");n.removeClass("active"),t.removeClass("dragging")},toggleBackground:function(){$("#content").toggleClass("invert"),window.App.Views.Editor.toggleColors()},toggleColor:function(e){e.preventDefault(),App.Views.Toolbar.model.set("color",$(e.currentTarget).data("color"))}});return n});